# 龙虎榜资金博弈分析系统 - 产品需求文档(PRD)

## 1. 项目概述

### 1.1 产品背景
龙虎榜作为A股市场重要的公开信息披露制度，每日公布异动股票的买卖席位数据，是投资者洞察主力资金动向的重要窗口。通过深度分析龙虎榜数据，散户投资者可以：
- 识别主力资金的真实意图（建仓、洗盘、出货）
- 发现市场热点和资金流向
- 规避潜在的投资风险
- 跟随聪明资金获取超额收益

然而，目前市场上的龙虎榜分析工具存在以下痛点：
1. **信息碎片化**：数据分散在各个平台，缺乏系统化整合
2. **分析维度单一**：仅展示基础数据，缺乏深度解读
3. **时效性差**：无法实时追踪席位动态和资金流向
4. **专业门槛高**：普通投资者难以理解复杂的资金博弈逻辑

### 1.2 产品定位
龙虎榜资金博弈分析系统是一款面向A股投资者的智能分析工具，通过AI技术深度解析龙虎榜数据，帮助用户：
- **快速识别**：一键识别机构、游资、北向资金等不同类型席位
- **智能解读**：AI自动分析资金博弈逻辑，生成投资建议
- **实时追踪**：实时监控重点席位动态，及时发现投资机会
- **风险预警**：基于历史数据和AI模型，提前预警潜在风险

### 1.3 目标用户
- **主要用户**：有一定投资经验的散户投资者（1-5年经验）
- **次要用户**：
  - 初级投资者：通过系统学习龙虎榜分析方法
  - 专业投资者：作为辅助决策工具，提高分析效率
  - 投资顾问：为客户提供专业的龙虎榜解读服务

### 1.4 核心价值
1. **降低分析门槛**：将专业的龙虎榜分析方法产品化，让普通投资者也能掌握
2. **提高决策效率**：AI自动分析，秒级生成深度报告，节省90%分析时间
3. **增强投资胜率**：通过识别主力意图，帮助用户做出更明智的投资决策
4. **风险管理**：及时预警高风险席位和出货信号，保护投资者利益

## 2. 功能需求

### 2.1 数据采集与处理

#### 2.1.1 数据源接入
- **龙虎榜基础数据**
  - 股票代码、名称、交易日期
  - 涨跌幅、换手率、成交额
  - 上榜原因（涨停、跌停、振幅、换手率等）
  - 买卖席位明细（前5买卖席位）
  
- **席位历史数据**
  - 席位历史上榜记录
  - 席位操作风格统计
  - 席位成功率分析
  - 席位持股周期分析

- **市场行情数据**
  - 个股历史K线数据
  - 板块热点数据
  - 市场情绪指标
  - 北向资金流向

#### 2.1.2 数据清洗与标准化
- 统一数据格式（金额单位、百分比格式）
- 识别和标记异常数据
- 席位名称标准化处理
- 数据完整性校验

### 2.2 席位识别与分类

#### 2.2.1 席位类型识别
基于席位名称和历史行为特征，自动识别席位类型：

1. **机构专用席位**
   - 特征：名称包含"机构专用"
   - 标签：价值投资、长期持有、基本面驱动
   
2. **知名游资席位**
   - 特征：市场公认的游资营业部
   - 细分类型：
     - 成都系：擅长超短，直线拉板
     - 温州帮：坐庄风格，连续涨停
     - T王：高频交易，日内做T
     - 赵老哥：题材龙头，情绪引导
   
3. **北向资金席位**
   - 特征：沪股通/深股通专用
   - 标签：外资、聪明钱、长期配置

4. **普通席位**
   - 特征：非特殊席位
   - 需要通过历史数据分析其潜在属性

#### 2.2.2 席位画像构建
为每个席位建立多维度画像：
- **操作风格**：打板、低吸、趋势、做T
- **偏好板块**：科技、医药、消费、周期
- **持仓周期**：超短(1-2天)、短线(3-5天)、中线(1周以上)
- **成功率**：历史操作胜率统计
- **资金规模**：大资金(>1亿)、中等资金(3000万-1亿)、小资金(<3000万)

### 2.3 资金博弈分析

#### 2.3.1 买卖对比分析
- **净买入/净卖出计算**
  - 买方前五总额 vs 卖方前五总额
  - 各席位净买入金额排序
  - 净买入占成交额比例
  
- **集中度分析**
  - 买方集中度：买一占比、前二占比
  - 卖方集中度：卖一占比、前二占比
  - 集中度对比：判断是锁仓还是出货

#### 2.3.2 席位博弈关系
- **同向博弈**
  - 机构+游资联合买入：强烈看多信号
  - 多家知名游资买入：题材炒作信号
  - 北向+机构买入：价值认可信号
  
- **对向博弈**
  - 机构买入 vs 游资卖出：长短期分歧
  - 游资接力 vs 游资出货：炒作阶段判断
  - 北向买入 vs 内资卖出：内外资分歧

#### 2.3.3 行为模式识别
- **建仓模式**：多日小幅买入，逐步建仓
- **拉升模式**：集中大额买入，快速拉升
- **出货模式**：高位大额卖出，分批出货
- **洗盘模式**：买卖交替，制造震荡
- **接力模式**：游资轮动，击鼓传花

### 2.4 AI智能分析

#### 2.4.1 深度分析报告生成
利用DeepSeek API生成专业的分析报告，包含：

1. **席位解读**
   - 各席位类型及其操作风格
   - 历史战绩和成功率
   - 当前操作意图分析
   
2. **博弈分析**
   - 多空力量对比
   - 主力资金意图
   - 散户应对策略
   
3. **风险提示**
   - 潜在风险点
   - 关键价位提示
   - 止损建议
   
4. **操作建议**
   - 短期操作策略
   - 中期趋势判断
   - 仓位管理建议

#### 2.4.2 实时问答交互
- 支持用户针对龙虎榜数据提问
- AI基于数据和历史经验回答
- 提供个性化的投资建议

### 2.5 监控与预警

#### 2.5.1 席位监控
- **重点席位关注列表**
  - 用户可添加关注的席位
  - 实时监控席位最新动态
  - 席位异动提醒
  
- **席位行为追踪**
  - 连续上榜监控
  - 买卖方向变化
  - 操作频率统计

#### 2.5.2 风险预警
- **出货预警**：知名游资高位卖出
- **风险席位预警**：历史胜率低的席位买入
- **异常交易预警**：席位行为异常变化
- **市场情绪预警**：整体情绪过热或过冷

### 2.6 数据可视化

#### 2.6.1 龙虎榜总览
- 当日龙虎榜股票列表
- 热门板块分布
- 资金流向图
- 市场情绪指标

#### 2.6.2 个股详情页
- 基础信息展示
- 买卖席位对比图
- 席位类型分布饼图
- 历史龙虎榜记录
- K线与龙虎榜联动展示

#### 2.6.3 席位详情页
- 席位基础信息
- 操作风格雷达图
- 历史战绩统计
- 近期操作记录
- 持仓周期分布

## 3. 数据结构设计

### 3.1 核心数据模型

```json
{
  "stock": {
    "ts_code": "股票代码",
    "name": "股票名称",
    "trade_date": "交易日期",
    "basic_info": {
      "close": "收盘价",
      "pct_change": "涨跌幅",
      "turnover_rate": "换手率",
      "amount": "成交额",
      "l_sell": "龙虎榜卖出额",
      "l_buy": "龙虎榜买入额",
      "l_amount": "龙虎榜成交额",
      "net_amount": "龙虎榜净买入额",
      "net_rate": "净买入占总成交比",
      "amount_rate": "龙虎榜成交占总成交比",
      "float_values": "流通市值",
      "reasons": ["上榜原因"],
      "trade_date_display": "显示日期"
    },
    "seat_data": {
      "buy_seats": [
        {
          "seat_name": "席位名称",
          "buy_amount": "买入金额",
          "sell_amount": "卖出金额",
          "net_amount": "净买入金额",
          "buy_rate": "买入占比",
          "sell_rate": "卖出占比",
          "player_info": {
            "name": "席位标签",
            "type": "席位类型",
            "description": "席位描述",
            "style": ["操作风格"]
          }
        }
      ],
      "sell_seats": [
        // 结构同buy_seats
      ]
    }
  }
}
```

### 3.2 席位画像数据

```json
{
  "seat_profile": {
    "seat_name": "席位名称",
    "seat_type": "席位类型",
    "metrics": {
      "total_trades": "总交易次数",
      "win_rate": "胜率",
      "avg_holding_days": "平均持仓天数",
      "avg_return": "平均收益率",
      "max_drawdown": "最大回撤"
    },
    "style_tags": ["打板", "低吸", "趋势"],
    "sector_preference": {
      "科技": 0.3,
      "医药": 0.2,
      "消费": 0.15
    },
    "recent_performance": {
      "last_30_days": {
        "trades": 15,
        "win_rate": 0.67,
        "total_return": 0.23
      }
    }
  }
}
```

## 4. 技术架构

### 4.1 系统架构
```
┌─────────────────────────────────────────────────────────┐
│                     前端展示层                           │
│  (Web端: React/Vue)  (移动端: 小程序/App)              │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────┴───────────────────────────────┐
│                     API网关层                           │
│            (统一接口管理、权限验证、限流)              │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────┴───────────────────────────────┐
│                    业务逻辑层                           │
├─────────────────────────────────────────────────────────┤
│  数据采集服务 │ 席位分析服务 │ AI分析服务 │ 预警服务  │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────┴───────────────────────────────┐
│                    数据存储层                           │
├─────────────────────────────────────────────────────────┤
│   MySQL(业务数据) │ Redis(缓存) │ ES(搜索) │ OSS(文件) │
└─────────────────────────────────────────────────────────┘
```

### 4.2 技术选型

#### 4.2.1 后端技术栈
- **开发语言**: Python 3.8+
- **Web框架**: FastAPI (高性能、自动API文档)
- **异步框架**: asyncio + aiohttp
- **任务队列**: Celery + Redis
- **定时任务**: APScheduler

#### 4.2.2 数据存储
- **关系型数据库**: MySQL 8.0 (存储结构化数据)
- **缓存数据库**: Redis 6.0 (热点数据缓存)
- **搜索引擎**: Elasticsearch 7.x (席位搜索、历史查询)
- **文件存储**: 阿里云OSS (分析报告、图表)

#### 4.2.3 AI能力
- **LLM接口**: DeepSeek API (深度分析、报告生成)
- **NLP处理**: jieba分词、TextRank (关键词提取)
- **机器学习**: scikit-learn (席位分类、风险预测)

#### 4.2.4 数据源
- **行情数据**: Tushare Pro API
- **龙虎榜数据**: 东方财富、同花顺数据接口
- **实时行情**: WebSocket推送

### 4.3 核心接口设计

#### 4.3.1 龙虎榜数据接口
```python
# 获取龙虎榜列表
GET /api/v1/billboard/list
参数:
  - date: 交易日期 (默认最新)
  - reason: 上榜原因筛选
  - page: 页码
  - size: 每页数量

# 获取个股龙虎榜详情
GET /api/v1/billboard/stock/{ts_code}
参数:
  - ts_code: 股票代码
  - date: 交易日期

# 获取AI分析报告
POST /api/v1/analysis/report
请求体:
{
  "ts_code": "000001.SZ",
  "date": "2024-01-10",
  "analysis_type": "deep" // deep|quick
}
```

#### 4.3.2 席位分析接口
```python
# 获取席位详情
GET /api/v1/seat/profile/{seat_name}

# 获取席位历史操作
GET /api/v1/seat/history/{seat_name}
参数:
  - start_date: 开始日期
  - end_date: 结束日期
  - page: 页码

# 席位监控订阅
POST /api/v1/seat/subscribe
请求体:
{
  "seat_names": ["中信证券上海溧阳路"],
  "alert_types": ["buy", "sell", "abnormal"]
}
```

#### 4.3.3 AI交互接口
```python
# AI问答
POST /api/v1/ai/chat
请求体:
{
  "question": "这个股票的游资是真买还是做T？",
  "context": {
    "ts_code": "000001.SZ",
    "date": "2024-01-10"
  }
}

# 生成自定义分析
POST /api/v1/ai/custom_analysis
请求体:
{
  "prompt": "分析最近3天成都系游资的操作特点",
  "data_range": {
    "start_date": "2024-01-08",
    "end_date": "2024-01-10"
  }
}
```

## 5. 产品运营策略

### 5.1 用户增长策略
1. **内容营销**
   - 每日龙虎榜精选解读
   - 知名游资操作案例分析
   - 龙虎榜投资教学视频
   
2. **社区运营**
   - 建立龙虎榜分析交流群
   - 定期举办线上分享会
   - KOL合作推广

3. **产品迭代**
   - 基于用户反馈快速迭代
   - A/B测试优化功能
   - 定期推出新功能

### 5.2 商业模式
1. **基础版** (免费)
   - 查看当日龙虎榜
   - 基础席位信息
   - 每日3次AI分析
   
2. **专业版** (￥99/月)
   - 历史数据查询
   - 席位深度画像
   - 无限AI分析
   - 自定义预警
   
3. **机构版** (定制)
   - API接口调用
   - 批量数据导出
   - 定制化分析
   - 专属客服

### 5.3 数据安全与合规
1. **数据合规**
   - 使用公开数据源
   - 遵守数据使用协议
   - 不涉及内幕信息
   
2. **用户隐私**
   - 用户数据加密存储
   - 严格的权限控制
   - 定期安全审计

3. **投资风险提示**
   - 明确提示投资风险
   - 不构成投资建议声明
   - 引导理性投资

## 6. 项目实施计划

### 6.1 开发阶段
1. **Phase 1 - MVP版本** (4周)
   - 基础数据采集和展示
   - 简单的席位分类
   - 基础AI分析功能
   
2. **Phase 2 - 功能完善** (6周)
   - 席位画像系统
   - 深度分析报告
   - 监控预警功能
   
3. **Phase 3 - 优化迭代** (4周)
   - 性能优化
   - UI/UX改进
   - 移动端开发

### 6.2 成功指标
1. **用户指标**
   - MAU: 10万+ (6个月目标)
   - 日活跃率: >30%
   - 付费转化率: >5%
   
2. **产品指标**
   - AI分析准确率: >80%
   - 系统可用性: >99.9%
   - 响应时间: <500ms

3. **业务指标**
   - 月收入: 100万+ (12个月目标)
   - 用户满意度: >4.5/5
   - 续费率: >70%

## 7. 风险与应对

### 7.1 技术风险
- **数据源依赖**: 建立多数据源备份机制
- **AI模型准确性**: 持续优化模型，人工复核
- **系统性能**: 采用分布式架构，弹性扩容

### 7.2 市场风险
- **竞争对手**: 差异化定位，专注AI深度分析
- **用户教育成本**: 提供完善的教程和客服
- **监管风险**: 严格合规，及时调整

### 7.3 运营风险
- **内容质量**: 建立严格的内容审核机制
- **用户流失**: 持续优化产品体验
- **成本控制**: 精细化运营，提高ROI

## 8. 附录

### 8.1 竞品分析
- 同花顺龙虎榜: 数据全面但分析浅显
- 东方财富龙虎榜: 界面友好但缺乏AI能力
- 益盟操盘手: 功能丰富但价格昂贵

### 8.2 技术词汇表
- **龙虎榜**: 交易所公布的异动股票买卖席位信息
- **游资**: 短线投机资金，追求快进快出
- **北向资金**: 通过沪深股通买入A股的境外资金
- **T+0**: 当日买入当日卖出的交易方式

### 8.3 参考资料
- 《龙虎榜揭秘：跟踪主力动向》
- 《游资操盘手法深度解析》
- 深交所、上交所官方规则文档